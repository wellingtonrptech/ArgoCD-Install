name: CI

on:
  push:
    branches:
      - main

jobs:
  setup-kubectl:
    runs-on: ubuntu-latest
    
    steps:
      - name: Check out the repository
        uses: actions/checkout@v2
      
      - name: Set up Kubernetes
        uses: azure/setup-kubectl@v1
        with:
          version: '1.30.0'
      
      - name: Set up kubeconfig
        run: |
          echo "${{ secrets.KUBECONFIG }}" | base64 --decode > ~/.kube/config
          export KUBECONFIG=~/.kube/config
      
      - name: Verify kubectl version
        run: kubectl version --client
